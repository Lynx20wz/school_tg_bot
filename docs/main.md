# Main.py документация

#### school_tg_bot

## Классы

#### `user_class` - Символизирует пользователя.

### Атрибуты:

- **`username`**: Имя пользователя.
- **`userid`**: ID пользователя.
- **`debug`**: Флаг отладки.
- **`setting_dw`**: Флаг настройки уведомлений.
- **`setting_notification`**: Флаг уведомлений.
- **`data`**: Кортеж, содержащий все вышеперечисленные данные пользователя.

### Методы:

- **`__init__`**: Инициализирует объект пользователя, проверяет наличие пользователя в массиве и обновляет его
  настройки, если он уже существует.
    - **Аргументы**: `username` (str), `userid` (int), `debug` (bool), `setting_dw` (bool), `setting_notification` (
      bool)
- **`get_user_from_massive`**: Получает пользователя из списка пользователей по имени.
    - **Аргументы**: `username` (str)
    - **Возвращает**: `user_class`, или индекс user в массиве users, или Tuple с user.data
- **`get_user`**: Декоратор, который возвращает объект `user_class` по username из кэша.
    - **Аргументы**: `func`, `message` (Message), `userid` (int)
    - **Возвращает**: `user_class`
- **`save_settings`**: Сохраняет настройки пользователя и обновляет файл кэша.
    - **Аргументы**: `setting_dw` (bool), `setting_notification` (bool), `debug` (bool), `save_cache` (bool)
    - **Возвращает**: None

---

#### `cache_class` - Хранит в себе словарь, созданный из файла кэша.

### Атрибуты:

- **`cache`**: Словарь, хранящий данные кэша.
- **`number_of_starts`**: Количество стартов бота
- **`time`**: Время последнего запуска бота
- **`users`**: Хранит словарь всех пользователей

### Методы:

- **`__init__`**: Инициализирует кэш, читает данные из файла кэша и обновляет номер запуска, если это необходимо.
    - **Аргументы**: `cache_restart` (bool)
- **`cache_read`**: Читает файл кэша или создает новый с базовым содержанием, если файл отсутствует.
    - **Возвращает**: dict
- **`user_record`**: Записывает пользователя в файл кэша, если он не существует.
    - **Аргументы**: `user` (user_class)
- **`homework_record`**: Записывает домашнее задание в файл кэша.
    - **Аргументы**: `homework` (dict)

---

## Функции

#### `main_button`

Создает и возвращает клавиатуру с кнопками главного меню для взаимодействия с ботом.

---

#### `restart`

Перезапускает бота и отправляет уведомление каждому пользователю из кэша.

---

#### `start`

Обрабатывает команду `/start`, приветствует пользователя и отправляет ему информацию о боте.

---

#### `timetable`

Обрабатывает запрос на расписание и отправляет фотографию расписания с текстовой подписью, в которой указан текстовый
вариант расписания и предметы для соответствующего урока.

---

#### `homework`

Обрабатывает запрос на домашнее задание и отправляет его в зависимости от настроек пользователя. Домашнее задание
получает из метода `full_parse` модуля `parser_school`.

---

#### `social_networks`

Отправляет пользователю ссылки на социальные сети.

---

#### `developer`

Выдает роль Developer, если ID совпадает с ID разработчика, который хранится в виртуальной среде (venv).

---

#### `make_setting_button`

Создает клавиатуру настроек для пользователя.

---

#### `settings`

Отправляет пользователю информацию о текущих настройках и клавиатуру для изменения настроек.

---

#### `change_delivery`

Обрабатывает изменения настроек выдачи домашнего задания (на день или на неделю).

---

#### `change_notification`

Обрабатывает изменения настроек уведомлений (включить или выключить).

---

#### `exit_settings`

Обрабатывает выход из меню настроек, сохраняет настройки в кэш и возвращает пользователя в главное меню.

---

#### `unknown_command`

Обрабатывает несуществующие команды и отправляет сообщение об ошибке.
